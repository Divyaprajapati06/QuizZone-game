{% extends 'layout/base.html' %}
{% load static %}

{% block title %}
Profile
{% endblock %}

{% block content %}

<div style="max-width:800px; margin:40px auto; background:#fff; padding:30px; 
            border-radius:10px; box-shadow:0 5px 15px rgba(0,0,0,0.1);">

    <h2 style="text-align:center; margin-bottom:20px; color:#333;">
        Welcome {{ user.username }}
    </h2>

    <div style="margin-bottom:20px; font-size:16px;">
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>Date Joined:</strong> {{ user.date_joined }}</p>
    </div>

    <hr style="margin:20px 0;">

    <div style="display:flex; justify-content:space-between; gap:20px; margin-bottom:25px;">
        
        <div style="flex:1; background:#4e73df; color:white; padding:20px; 
                    border-radius:8px; text-align:center;">
            <h3 style="margin:0; font-size:28px;">{{ total_attempts }}</h3>
            <p style="margin:5px 0 0;">Total Quiz Attempts</p>
        </div>

        <div style="flex:1; background:#1cc88a; color:white; padding:20px; 
                    border-radius:8px; text-align:center;">
            <h3 style="margin:0; font-size:28px;">{{ total_score }}</h3>
            <p style="margin:5px 0 0;">Total Score</p>
        </div>

    </div>

    <hr style="margin:20px 0;">

    <h3 style="margin-bottom:15px; color:#333;">Category Wise Scores:</h3>

    <table style="width:100%; border-collapse:collapse; font-size:15px;">
        <tr style="background:#4e73df; color:white;">
            <th style="padding:10px; text-align:left;">Category</th>
            <th style="padding:10px; text-align:left;">Score</th>
        </tr>

        {% for score in scores %}
        <tr style="border-bottom:1px solid #ddd;">
            <td style="padding:10px;">{{ score.category.name }}</td>
            <td style="padding:10px;">{{ score.score }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="2" style="padding:15px; text-align:center;">
                No quiz attempted yet.
            </td>
        </tr>
        {% endfor %}
    </table>

</div>

{% endblock %}
