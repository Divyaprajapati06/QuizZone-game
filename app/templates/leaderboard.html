{% extends 'layout/base.html' %}
{% load custom_filters %}
{% load static %}

{% block title %}
Leaderboard
{% endblock %}

{% block content %}

<h2 class="text-center mb-4 mt-5">Leaderboard</h2>

<!-- Search Bar Start -->
<div class="container mb-3">
    <form method="GET">
        <div class="input-group">
            <input type="text"
                   name="search"
                   class="form-control"
                   placeholder="Search your username..."
                   value="{{ search }}">
            <button class="btn btn-dark" type="submit">Search</button>
        </div>
    </form>
</div>
<!-- Search Bar End -->

<div class="container table-responsive">
    <table class="table table-bordered text-center">
        <thead class="table-dark">
            <tr>
                <th>User</th>
                {% for cat in categories %}
                <th>{{ cat.name }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for user, scores in user_scores.items %}
            <tr>
                <td>{{ user.username }}</td>
                {% for cat in categories %}
                <td>{{ scores|get_item:cat }}</td>
                {% endfor %}
            </tr>
            {% endfor %}

            {% if not user_scores %}
            <tr>
                <td colspan="{{ categories|length|add:1 }}">
                    No user found.
                </td>
            </tr>
            {% endif %}

        </tbody>
    </table>
</div>

{% endblock %}
